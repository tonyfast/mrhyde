---
# Keep this to activate jekyll liquid templates for url names
permalink: /demo.html
---
<style id="custom">
   @import "/mrhyde/cards/css/app.css";

  body{
    overflow: auto;
  }
    a #present, #close{
      position: fixed;
      float: left;
      z-index: 1000;
    }
</style>
<style id="github-markdown">
  @import "//cdn.jsdelivr.net/g/github-markdown-css";
   .markdown-body {
        min-width: 200px;
        max-width: 790px;
        margin: 0 auto;
        padding: 30px;
    }
</style>

<style id="reveal" disabled>
  @import "//cdn.jsdelivr.net/g/reveal.js(css/reveal.min.css+css/theme/night.css)";
 
  body{
    overflow: auto;
  }
</style>

<style id="foundation">
  @import "//cdn.jsdelivr.net/g/foundation(css/normalize.css+css/foundation.min.css)";
</style>

<script src="//cdn.jsdelivr.net/g/d3js,jquery,reveal.js"></script>

<script>
  
  // Load card generated by mrhyde
  d3.json( '/mrhyde/cards/demo.json', function(d){
    // The text in demo.json is markdownified by Jekyll
    // it simply returns a block of html
    
    d3.select( '.markdown-body')
      .html( d ); // update document html
  });
  
  $(document).ready( function(){
    // Buttons
    d3.select('#present')
      .on('click', function(){
        if ($('.reveal').length == 0){
          StartReveal();
        } else {
          $('.reveal').toggle();
          $('.markdown-body').toggle();
        }
      });
     
    d3.select('#close')
      .on('click', function(){
        $('.reveal').hide();
        $('.markdown-body').show();
      });
    });
  
  function StartReveal(){
    WrapSlides( $('h1,h2') );
    Reveal.initialize({
      width: '80%',
      height: '100%',
    });
  }
  
  function WrapSlides( h ){
    // wrap the selectors in the reveal slides
    var deck = $('.presentation').first().addClass('reveal');
    var slides = $('<div class="slides"></div>').appendTo( deck );

    // tranverse dom to add each slide
    $(h).each( function(){            
      WrapSection( $(this), $(slides), null, 0 );
      $('.markdown-body').hide();
    });
    
    function WrapSection( el, slides, section, flag ){
      // traverse dom node chode children
      if (flag == 0){
        // initiate the slide
        var section = $('<section class="markdown-body"></section>')
                          .appendTo( slides );
      }
      // get tag name of current element
      if (el.length >0 ){
        var tag = $(el)[0].hasOwnProperty('tagName') ? $(el)[0].tagName.toLowerCase() : '';
      } else { return null;}
      
      if( $.inArray( tag, ['h1','h2'] ) > -1 && flag == 1 ){
        // break when satisfied
        return null;
      } else {
        // Create slides by copying DOM nodes
        var next = $(el).next()
        $(el).clone().appendTo( section );
        return WrapSection( $(next), $(slides), $(section), 1 );
      }
    };
  };
</script>

<!-- HTML Structure -->
{% include controls.html %}

<div class="markdown-body"></div>
<div class="presentation"></div>